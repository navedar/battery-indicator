
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<style>
body{
  text-align: center;
  padding-top: 25vh;
  background-color: #f2f2f1;
}
#tip{
  margin: auto;
  width: 30px;
  border: 10px solid #343333;
  border-radius: 15px;
  margin-bottom: -6px;
}
#battery{
  position: relative;
  margin: auto;
  width: 100px;
  height: 200px;
  border: 10px solid #343333;
  border-radius: 15px;
}
#cell{
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 5%;
  background-color: #08c66b;
  font-size: 18px;
  color: white;
  font-weight: bold;
  z-index: 1;
}
#indicator{
  position: absolute;
  z-index: 100;
  width: 100%;
  text-align: center;
}
#indicator img{
  margin-top: 25%;
  height: 40px;
  opacity: 0.2;
}

</style>
<body>
<div id="tip"></div>
<div id="battery">
  <div id="indicator"><img src="./charge.png"></div>
  <div id="cell" height="100%"></div>
</div>



<script>
 var cell = document.getElementById('cell');
var indicator = document.getElementById('indicator');
 navigator.getBattery().then(function(battery) {
   function updateAllBatteryInfo(){
     updateChargeInfo();
     updateLevelInfo();
     updateChargingInfo();
     updateDischargingInfo();
   }
   updateAllBatteryInfo();

   battery.addEventListener('chargingchange', function(){
     updateChargeInfo();
   });
   function updateChargeInfo(){
      if(battery.charging){
          cell.style.background="#06eeb0";
          indicator.style.display="block";
      }
      else{
        indicator.style.display="none";
        if(battery.level<0.25){
          cell.style.background="#e0821f";
        }
        else{
        cell.style.background="#08c66b";
        }
      }
   }

   battery.addEventListener('levelchange', function(){
     updateLevelInfo();
   });
   function updateLevelInfo(){
     cell.style.height = battery.level * 100 + "%";
     cell.innerHTML = "<br/>"+Math.round(battery.level * 100) + "%";
     if(battery.level<0.15){
       cell.style.background="#e0821f";
     }
   }

   battery.addEventListener('chargingtimechange', function(){
     updateChargingInfo();
   });
   function updateChargingInfo(){
     console.log("Battery charging time: "
                  + battery.chargingTime + " seconds");
   }

   battery.addEventListener('dischargingtimechange', function(){
     updateDischargingInfo();
   });
   function updateDischargingInfo(){
     console.log("Battery discharging time: "
                  + battery.dischargingTime + " seconds");
   }

 });

</script>
</body>
